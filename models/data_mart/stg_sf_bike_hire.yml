version: 2

models:
  - name: agg_per_day
    description: Data from sf_bike_hire_and_weather but aggregated into day and start_station.
    columns:
      - name: avg_rain
        description: "average daily rain in mm across all weather stations from the source."
      - name: avg_temp
        description: "average daily temperature in Celcius across all weather stations from the source."
      - name: avg_duration
        description: "average ride duration in minutes of all rides from that start station for that day."
        
  - name: sf_bike_hire_and_weather
    description: "One row = one bike hire including all aggregated weather data for that row's date."
    columns:
      - name: duration_mins
        description: "decimal value does not == seconds"
      - name: start_time
        description: "time is in PDT/PST"
      - name: rainfall_category
        description: "{{ doc('rainfall') }}"
      - name: end_time
        description: "time is in PDT/PST"
      - name: bike_id
        description: "This column is the primary key in the bike_total_ride_duration model"

  - name: weather_stations
    columns:
      - name: station
        tests:
          - unique
          - not_null
